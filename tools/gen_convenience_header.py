#!/usr/bin/env python3
# vim: tabstop=8 expandtab shiftwidth=4 softtabstop=4

import os
from pathlib import Path

excludes = ['libTAU.hpp', 'storage.hpp', 'io_service.hpp']

with open('include/libTAU/libTAU.hpp', 'w+') as f:
    f.write('''
// This header is generated by tools/gen_convenience_header.py

''')

    for fn in os.popen('git ls-files include/libTAU/*.hpp '
                       'include/libTAU/kademlia/*.hpp '
                       'include/libTAU/extensions/*.hpp'):

        fn = Path(fn.strip())

        if fn.name in excludes:
            continue

        f.write('#include "%s"\n' % fn.relative_to('include'))
